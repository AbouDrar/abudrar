(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}})();let x=null;function b(t=void 0){if(!x){const e=document.querySelector("#blog-json-data");if(e){const s=JSON.parse(e.textContent);s&&(x=s)}}return x?t?x[t]:x:null}function T(){const t=b("downloadButtonsSelector"),e=b("messages")?.unknownWebsite||"unknown website";if(!t)return;document.querySelectorAll(t).forEach(o=>{o.addEventListener("click",n=>{n.preventDefault();const r=n.target,l=r.dataset.site||"",i=r.dataset.url||"";if(!l){alert(e);return}let a="/p/download.html?website="+l;i&&(a+="&slug="+i),window.location.href=a})})}function L(){const t=b("countdownContainerSelector");if(!t)return;const e=document.querySelector(t);if(!e)return;const s=e.querySelector("button"),o=e.querySelector('[data-element="text_container"]'),n=e.querySelector('[data-element="placeholder"]'),r=Number(e.dataset.initvalue||10);let l=r,i=!1;const a=f=>{n&&(n.innerText=f.toString())},d=()=>{if(i)return;i=!0;const f=new URLSearchParams(window.location.search);let m="";if(f.forEach((y,p)=>{p==="website"?m+=y:p==="slug"?m+=y.substring(12):m+=`&${p}=${y}`}),!m){alert("The link is broken");return}a(r),o.style.display="block";const g=setInterval(()=>{l--,a(l),l<=0&&(clearInterval(g),i=!1,l=r,o.style.display="none",window.location.href=m)},1e3)};s?.addEventListener("click",f=>{f.preventDefault(),d()})}function w(t="list",e={maxResults:10,fetchImages:!0,getNextPageToken:!1}){const s=b("blogId")||"",o=b("bloggerApiKey")||"";(!s||!o)&&console.error("Blogger api key and/or blog ID is missing");let n=`https://www.googleapis.com/blogger/v3/blogs/${s}/posts`;t==="search"&&(n+="/search"),n+=`?key=${o}`,t==="search"?n+=`&q=${e.query||""}`:e.labels&&e.labels.length>0&&(n+=`&labels=${e.labels.join(",")}`),t!=="search"&&(n+=`&maxResults=${e.maxResults||10}`,n+=`&fetchImages=${e.fetchImages?"true":"false"}`),n+=`&fetchBodies=${e.fetchBodies?"true":"false"}`,e.nextPageToken&&t!=="search"&&(n+=`&pageToken=${e.nextPageToken}`);const r=[];e.fields&&Array.isArray(e.fields)&&e.fields.length>0&&r.push(`items(${e.fields.join(",")})`),e.getNextPageToken&&r.push("nextPageToken"),r.length&&(n+=`&fields=${r.join(",")}`),fetch(n).then(l=>l.json()).then(l=>{e.onSuccess&&e.onSuccess(l)}).catch(l=>{e.onError&&e.onError(l)}).finally(()=>{e.onFinally&&e.onFinally()})}function v(t){let e=document.createElement("template");return e.innerHTML=t,e.content.firstElementChild?.cloneNode(!0)||void 0}function I(t,e){const s=new ResizeObserver(o=>{for(let n of o){const r=n.contentRect;e(r)}});return s.observe(t),s}function q(t,e,s=!0,o=.2){new IntersectionObserver((r,l)=>{r.forEach(i=>{if(i.isIntersecting){const a=i.target;e&&typeof e=="function"&&e(a),s&&l.unobserve(a)}})},{rootMargin:"0px 0px 50px 0px",threshold:o}).observe(t)}function R(t){if(!(t instanceof HTMLElement))return;let e;const s=o=>{o.dataset.src&&(["loader","lazy"].forEach(r=>{o.classList.contains(r)&&o.classList.remove(r)}),o.setAttribute("src",o.dataset.src),o.removeAttribute("data-src"))};q(t,o=>{clearTimeout(e),e=setTimeout(()=>{s(o)},500)})}function N(t){const e=t.parentElement;if(!e)return;let s=null;const o=n=>{let r=15;n<=520?r=2:n<=640?r=3:n<=768?r=4:n<=1024?r=7:n<=1168&&(r=8),t.querySelectorAll(":scope>*").forEach((i,a)=>{a+1>r?i.style.display="none":i.style.display=""})};I(e,n=>{s&&clearTimeout(s),s=setTimeout(()=>o(n?.width||0),700)})}const C=t=>t?new Date(t).toLocaleDateString("fr"):"",E=(t=void 0)=>v(`<div ${t?t.join(" "):""} class="justify-center">
          <div class="w-5 aspect-square m-2 animate-spin rounded-full border-2 border-gray-300 border-t-zinc-600"></div>
      </div>`);function A(t,e,s=0){const o=e.content.firstElementChild?.cloneNode(!0);if(!o)return null;const n=o.querySelector('[data-container="post_thumbnail"]');let r="";return t.images.length&&(r=t.images[0].url||"",s>0&&(r=$(r,s))),r?n?.querySelector("img")?.setAttribute("src",r):n?.remove(),o.querySelectorAll('[data-container="post_url"]').forEach(i=>{i.href=t.url||"#"}),o.querySelector('[data-container="post_title"]>a').textContent=t.title||"No title",o.querySelector('[data-container="post_date"]>span').textContent=C(t.published||""),o}function $(t,e){return/\/w\d+-h\d+\//.test(t)?t.replace(/\/w\d+-h\d+\//,`/s${e}/`):t.replace(/\/s\d+\//,`/s${e}/`)}function _(){const t=b("removeFirstImageIn");if(!t||!Array.isArray(t)||t.length===0)return;document.querySelectorAll(t.join(",")).forEach(s=>{s.querySelector("img")?.remove()})}function B(){const t=document.querySelector("#category-template-type-2"),e=document.querySelector("#post-card-template"),s=document.querySelector("#index-post-row-template");if(!t)return;const o=document.querySelectorAll('[data-category-type="1"]'),n=(i,a,d,f)=>{const m=t.content.firstElementChild?.cloneNode(!0);if(!m)return;m.querySelector('[data-container="title"]').textContent=a,m.querySelector('[data-container="category_link"]').href="/search?category="+i;const g=m.querySelector("[data-type='single']"),y=m.querySelector("[data-type='multiple']");!e||!s||(d.forEach((p,S)=>{if(S===0){const u=A(p,e,550);u&&g?.append(u)}else{const u=A(p,s,300);u&&y?.append(u)}}),f.insertAdjacentElement("beforebegin",m))},r=(i,a,d,f)=>{w("list",{labels:[d],maxResults:f,fields:["images","title","url","published"],fetchImages:!0,fetchBodies:!1,onSuccess:m=>{m.items&&n(d,a,m.items,i)},onFinally:()=>i.remove()})},l=E();o.forEach(i=>{i.classList.add("flex","items-start","justify-center","min-h-[70vh]","w-full"),l&&i.append(l.cloneNode(!0)),q(i,a=>{const d=a.dataset.category,f=a.dataset.title,m=a.dataset.maxResults||"5";d?r(a,f||"No title",d,Number(m)):a.remove()},!0,.3)})}function j(){const t=document.querySelector('[data-observe-for="recent_posts"]'),e=document.querySelector("#latest-posts-template"),s=document.querySelector("#index-post-row-template");if(!e||!t)return;const o=(r,l)=>{const i=e.content.firstElementChild?.cloneNode(!0);if(!i)return;i.querySelector('[data-container="title"]').textContent=r,i.querySelector('[data-container="more_posts_link"]').href="/search";const a=i.querySelector("[data-element='posts_container']");!a||!s||(l.forEach(d=>{const f=A(d,s,250);f&&a?.append(f)}),t.insertAdjacentElement("beforebegin",i))},n=(r,l)=>{w("list",{maxResults:l,fields:["images","title","url","published"],fetchImages:!0,fetchBodies:!1,onSuccess:i=>{i.items&&o(r,i.items)}})};q(t,r=>{const l=r.dataset.title,i=r.dataset.maxResults||"5";n(l||"No title",Number(i))})}function M(t,e){const s=e.content.firstElementChild?.cloneNode(!0);if(!s)return null;const o=s.querySelector('[data-container="post_thumbnail"]');let n="";return t.images.length&&(n=t.images[0].url||""),n?o?.querySelector("img")?.setAttribute("src",n):o?.remove(),s.querySelectorAll('[data-container="post_url"]').forEach(l=>{l.href=t.url||"#"}),s.querySelector('[data-container="post_title"]>a').textContent=t.title||"No title",s.querySelector('[data-container="post_date"]>span').textContent=C(t.published||""),s}function O(){const t=document.querySelector("#index-post-row-template"),e=document.querySelector("[data-element='recent_posts_container']");if(!t||!e)return;const s=document.querySelector('[data-element="recent_posts_controller"]');let o=s?.querySelector('[data-spinner="recent_posts"]')||null;const n=s?.querySelector("button")||null;let r="",l=!0,i=!1;const d=new URLSearchParams(window.location.search||"").get("category")?.split(",")||[],f=c=>{const h=M(c,t);h&&e.append(h)},m=(c=!0)=>{o||(o=E(['data-spinner="recent_posts"']),o&&s&&s.prepend(o)),o&&o.classList.toggle("hidden",!c)},g=c=>n?.classList.toggle("hidden",!c),y=["images","title","url","published"],p=b("messages")?.noMorePostsFound||"n/a",S=()=>{n?.classList.add("hidden");const c=v(`<p class="text-center p-2 text-red-500">${p}</p>`);c&&s?.append(c)},u=()=>{i||!l||(m(),g(!1),i=!0,w("list",{fetchBodies:!1,fetchImages:!0,fields:y,maxResults:10,getNextPageToken:!0,nextPageToken:r||"",labels:d,onSuccess:c=>{c.nextPageToken&&c.nextPageToken!==r?(r=c.nextPageToken,g(!0)):(l=!1,g(!1),S()),c.items&&Array.isArray(c.items)&&c.items.forEach(h=>{f(h)})},onFinally:()=>{i=!1,m(!1)}}))};n?.addEventListener("click",c=>{c.preventDefault(),u()}),n&&q(n,()=>{u()},!0)}function D(t=".html-injection-template"){document.querySelectorAll(t).forEach(s=>{const o=s.innerHTML,n=s.dataset.position||"afterbegin";let r=s.dataset.container?document.querySelector(s.dataset.container):null;!r&&s.dataset.containerAlt&&(r=document.querySelector(s.dataset.containerAlt)),!(!r||!o||!["beforebegin","afterbegin","beforeend","afterend"].includes(n))&&r.insertAdjacentHTML(n,o)})}function F(t="#related-posts-template"){const e=document.querySelector(t),s=document.querySelector('[data-observe-for="related_posts"]'),o=s?.dataset.label?.replace(/\s+/g,"").split(",")||[];if(!e||!s||o.length<=0)return;const n=s?.dataset.postId||"",r=a=>{let d='<div class="flex gap-2 p-1">';if(a.images?.length){const m=a.images[0].url||"";m&&(d+=`<div class="min-w-20 w-20 aspect-square flex justify-center items-center overflow-hidden rounded"><a href="${a.url||"#"}" class="block w-full h-full"><img src="${m}" class="object-cover h-full min-w-full hover-scale-up"/></a></div>`)}const f=C(a.published||"");return d+=`<div class="flex-auto"><a href="${a.url||"#"}" class="block hover:text-amber-400">${a.title||"no title"}</a><div><span>${f}</span></div></div></div>`,v(d)},l=a=>{const d=v('<div class="flex flex-col divide-y divide-neutral-300"></div>');if(!d||!a.length)return;const f=e.content.firstElementChild?.cloneNode(!0);a.forEach(m=>{const g=r(m);g&&d.append(g)}),f?.appendChild(d),f&&s.insertAdjacentElement("afterend",f)};s.classList.add("flex","items-start","justify-center","min-h-[60vh]","w-full");const i=E();i&&s.append(i),q(s,()=>{w("list",{fields:["title","url","images","published","id"],fetchBodies:!1,fetchImages:!0,maxResults:6,labels:o,onSuccess:a=>{let d=a.items||[];n&&(d=d.filter(f=>f.id!==n)),d.length&&l(d)},onError:a=>{console.log(a)},onFinally:()=>s.remove()})},!0,.3)}const V=(t=".search-box")=>{const e=document.querySelector(t);if(!e)return;const s=e.querySelector("input");let o=e.dataset.visible==="true",n=null;const r=document.querySelectorAll('[data-trigger-for="search_box"]'),l=e.querySelector("[data-results]"),i=u=>{e.setAttribute("data-visible",u?"true":"false"),o=u},a=()=>{if(l?.querySelector("[data-spinner]"))return;const u=E(["data-spinner"]);u&&l?.append(u)},d=u=>{e.setAttribute("data-results-visible",u?"true":"false")},f=u=>{e.setAttribute("data-spinner-visible",u?"true":"false")},m=u=>{const c=u.match(/<img[^>]+src="([^">]+)"/);return c?c[1].replace("/s1600/","/s150/"):""},g=u=>{let c='<div class="flex gap-2 w-full py-2">';const h=m(u.content||"");return h&&(c+=`<div class="thumbnail min-w-20 w-20 aspect-square rounded overflow-hidden ms-2"><a href="${u.url||"#"}" class="w-full h-full"><img src="${h}" class="object-cover min-h-full min-w-full hover-scale-up"/></a></div>`),c+=`<div class="flex-auto"><a href="${u.url||"#"}" class="block pe-2">${u.title||"No title"}</a></div>`,c+="</div>",v(c)},y=u=>{const c=v('<div class="flex flex-col divide-y w-full divide-neutral-400 pt-2"></div>');c&&(u.forEach(h=>{const k=g(h);k&&c.append(k)}),l?.append(c))},p=b("messages")?.searchNoResults??"N/A",S=()=>{const u=v(`<p class="text-red-500 text-center w-full p-2">${p}</p>`);u&&l?.append(u)};a(),r.forEach(u=>{u.addEventListener("click",c=>{c.preventDefault();const h=c.target;i(h?.dataset.action!=="close")})}),document.addEventListener("click",u=>{const c=u.target;c&&c&&o&&!e?.contains(c)&&c.dataset.triggerFor!=="search_box"&&(d(!1),i(!1))}),s?.addEventListener("input",u=>{const c=u.target?.value||"";n&&clearTimeout(n),n=setTimeout(()=>{if(!c){d(!1);return}f(!0),d(!0),w("search",{query:c,fields:["title","url","published","content"],fetchBodies:!0,onSuccess:h=>{h&&Array.isArray(h.items)?y(h.items):S()},onFinally:()=>{f(!1)}}),l?.querySelector(":scope>:not([data-spinner])")?.remove()},1e3)})},P=document.querySelector('[data-elememt="nav_list"]');P&&N(P);const H=t=>{const e=document.querySelector(t);if(!e)return;const s=document.querySelectorAll('[data-trigger-for="sidenav"]'),o=n=>e.setAttribute("data-visible",n?"true":"false");s.forEach(n=>{n.addEventListener("click",r=>{r.preventDefault();const l=r.target?.dataset.triggerType==="close";o(!l)})})};function z(){const t=localStorage.getItem("theme")||"system",e=document.querySelectorAll('[name="theme_switcher"]'),s=o=>{document.documentElement.setAttribute("data-theme",o)};(t==="dark"||t==="light"||t==="system")&&s(t),e.forEach(o=>{t===o.value&&(o.checked=!0),o.addEventListener("change",n=>{const r=n.target;r.checked&&["system","dark","light"].includes(r.value)&&(s(r.value),localStorage.setItem("theme",r.value))})})}document.addEventListener("DOMContentLoaded",()=>{z(),V(),H('[data-element="sidenav"]'),F(),O(),B(),j(),_(),T(),D(),L(),document.querySelectorAll('img[data-lazy="true"]').forEach(t=>{R(t)})});
