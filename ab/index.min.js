(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();let x=null;function b(t=void 0){if(!x){const e=document.querySelector("#blog-json-data");if(e){const r=JSON.parse(e.textContent);r&&(x=r)}}return x?t?x[t]:x:null}function T(){const t=b("downloadButtonsSelector"),e=b("messages")?.unknownWebsite||"unknown website";if(!t)return;document.querySelectorAll(t).forEach(o=>{o.addEventListener("click",n=>{n.preventDefault();const s=n.target,a=s.dataset.site||"",l=s.dataset.url||"";if(!a){alert(e);return}let c="/p/download.html?website="+a;l&&(c+="&slug="+l),window.location.href=c})})}function L(){const t=b("countdownContainerSelector");if(!t)return;const e=document.querySelector(t);if(!e)return;const r=e.querySelector(":scope>button"),o=e.querySelector('[data-element="text_container"]'),n=e.querySelector('[data-element="placeholder"]'),s=Number(e.dataset.initvalue||10);let a=s,l=!1;const c=f=>{n&&(n.innerText=f.toString())},m=()=>{if(l)return;l=!0;const f=new URLSearchParams(window.location.search);let d="";if(f.forEach((y,g)=>{g==="website"?d+=y:g==="slug"?d+=y.substring(12):d+=`&${g}=${y}`}),!d){alert("The link is broken");return}c(s),o.style.display="block";const p=setInterval(()=>{a--,c(a),a<=0&&(clearInterval(p),l=!1,a=s,o.style.display="none",window.location.href=d)},1e3)};r?.addEventListener("click",f=>{f.preventDefault(),m()})}function w(t="list",e={maxResults:10,fetchImages:!0,getNextPageToken:!1}){const r=b("blogId")||"",o=b("bloggerApiKey")||"";(!r||!o)&&console.error("Blogger api key and/or blog ID is missing");let n=`https://www.googleapis.com/blogger/v3/blogs/${r}/posts`;t==="search"&&(n+="/search"),n+=`?key=${o}`,t==="search"?n+=`&q=${e.query||""}`:e.labels&&e.labels.length>0&&(n+=`&labels=${e.labels.join(",")}`),t!=="search"&&(n+=`&maxResults=${e.maxResults||10}`,n+=`&fetchImages=${e.fetchImages?"true":"false"}`),n+=`&fetchBodies=${e.fetchBodies?"true":"false"}`,e.nextPageToken&&t!=="search"&&(n+=`&pageToken=${e.nextPageToken}`);const s=[];e.fields&&Array.isArray(e.fields)&&e.fields.length>0&&s.push(`items(${e.fields.join(",")})`),e.getNextPageToken&&s.push("nextPageToken"),s.length&&(n+=`&fields=${s.join(",")}`),fetch(n).then(a=>a.json()).then(a=>{e.onSuccess&&e.onSuccess(a)}).catch(a=>{e.onError&&e.onError(a)}).finally(()=>{e.onFinally&&e.onFinally()})}function v(t){let e=document.createElement("template");return e.innerHTML=t,e.content.firstElementChild?.cloneNode(!0)||void 0}function R(t,e){const r=new ResizeObserver(o=>{for(let n of o){const s=n.contentRect;e(s)}});return r.observe(t),r}function q(t,e,r=!0,o=.2){new IntersectionObserver((s,a)=>{s.forEach(l=>{if(l.isIntersecting){const c=l.target;e&&typeof e=="function"&&e(c),r&&a.unobserve(c)}})},{rootMargin:"0px 0px 50px 0px",threshold:o}).observe(t)}function I(t){if(!(t instanceof HTMLElement))return;let e;const r=o=>{o.dataset.src&&(["loader","lazy"].forEach(s=>{o.classList.contains(s)&&o.classList.remove(s)}),o.setAttribute("src",o.dataset.src),o.removeAttribute("data-src"))};q(t,o=>{clearTimeout(e),e=setTimeout(()=>{r(o)},500)})}function N(t){const e=t.parentElement;if(!e)return;let r=null;const o=n=>{let s=15;n<=520?s=2:n<=640?s=3:n<=768?s=4:n<=1024?s=7:n<=1168&&(s=8),t.querySelectorAll(":scope>*").forEach((l,c)=>{c+1>s?l.style.display="none":l.style.display=""})};R(e,n=>{r&&clearTimeout(r),r=setTimeout(()=>o(n?.width||0),700)})}const k=t=>t?new Date(t).toLocaleDateString("fr"):"",E=(t=void 0)=>v(`<div ${t?t.join(" "):""} class="justify-center">
          <div class="w-5 aspect-square m-2 animate-spin rounded-full border-2 border-gray-300 border-t-zinc-600"></div>
      </div>`);function C(t,e,r=0){const o=e.content.firstElementChild?.cloneNode(!0);if(!o)return null;const n=o.querySelector('[data-container="post_thumbnail"]');let s="";return t.images.length&&(s=t.images[0].url||"",r>0&&(s=$(s,r))),s?n?.querySelector("img")?.setAttribute("src",s):n?.remove(),o.querySelectorAll('[data-container="post_url"]').forEach(l=>{l.href=t.url||"#"}),o.querySelector('[data-container="post_title"]>a').textContent=t.title||"No title",o.querySelector('[data-container="post_date"]>span').textContent=k(t.published||""),o}function $(t,e){return/\/w\d+-h\d+\//.test(t)?t.replace(/\/w\d+-h\d+\//,`/s${e}/`):t.replace(/\/s\d+\//,`/s${e}/`)}function _(){const t=b("removeFirstImageIn");if(!t||!Array.isArray(t)||t.length===0)return;document.querySelectorAll(t.join(",")).forEach(r=>{r.querySelector("img")?.remove()})}function B(){const t=document.querySelector("#category-template-type-2"),e=document.querySelector("#post-card-template"),r=document.querySelector("#index-post-row-template");if(!t)return;const o=document.querySelectorAll('[data-category-type="1"]'),n=(l,c,m,f)=>{const d=t.content.firstElementChild?.cloneNode(!0);if(!d)return;d.querySelector('[data-container="title"]').textContent=c,d.querySelector('[data-container="category_link"]').href="/search?category="+l;const p=d.querySelector("[data-type='single']"),y=d.querySelector("[data-type='multiple']");!e||!r||(m.forEach((g,S)=>{if(S===0){const u=C(g,e,550);u&&p?.append(u)}else{const u=C(g,r,300);u&&y?.append(u)}}),f.insertAdjacentElement("beforebegin",d))},s=(l,c,m,f)=>{w("list",{labels:[m],maxResults:f,fields:["images","title","url","published"],fetchImages:!0,fetchBodies:!1,onSuccess:d=>{d.items&&n(m,c,d.items,l)},onFinally:()=>l.remove()})},a=E();o.forEach(l=>{l.classList.add("flex","items-start","justify-center","min-h-[70vh]","w-full"),a&&l.append(a.cloneNode(!0)),q(l,c=>{const m=c.dataset.category,f=c.dataset.title,d=c.dataset.maxResults||"5";m?s(c,f||"No title",m,Number(d)):c.remove()},!0,.3)})}function j(){const t=document.querySelector('[data-observe-for="recent_posts"]'),e=document.querySelector("#latest-posts-template"),r=document.querySelector("#index-post-row-template");if(!e||!t)return;const o=(s,a)=>{const l=e.content.firstElementChild?.cloneNode(!0);if(!l)return;l.querySelector('[data-container="title"]').textContent=s,l.querySelector('[data-container="more_posts_link"]').href="/search";const c=l.querySelector("[data-element='posts_container']");!c||!r||(a.forEach(m=>{const f=C(m,r,250);f&&c?.append(f)}),t.insertAdjacentElement("beforebegin",l))},n=(s,a)=>{w("list",{maxResults:a,fields:["images","title","url","published"],fetchImages:!0,fetchBodies:!1,onSuccess:l=>{l.items&&o(s,l.items)}})};q(t,s=>{const a=s.dataset.title,l=s.dataset.maxResults||"5";n(a||"No title",Number(l))})}function M(t,e){const r=e.content.firstElementChild?.cloneNode(!0);if(!r)return null;const o=r.querySelector('[data-container="post_thumbnail"]');let n="";return t.images.length&&(n=t.images[0].url||""),n?o?.querySelector("img")?.setAttribute("src",n):o?.remove(),r.querySelectorAll('[data-container="post_url"]').forEach(a=>{a.href=t.url||"#"}),r.querySelector('[data-container="post_title"]>a').textContent=t.title||"No title",r.querySelector('[data-container="post_date"]>span').textContent=k(t.published||""),r}function O(){const t=document.querySelector("#index-post-row-template"),e=document.querySelector("[data-element='recent_posts_container']");if(!t||!e)return;const r=document.querySelector('[data-element="recent_posts_controller"]');let o=r?.querySelector('[data-spinner="recent_posts"]')||null;const n=r?.querySelector("button")||null;let s="",a=!0,l=!1;const m=new URLSearchParams(window.location.search||"").get("category")?.split(",")||[],f=i=>{const h=M(i,t);h&&e.append(h)},d=(i=!0)=>{o||(o=E(['data-spinner="recent_posts"']),o&&r&&r.prepend(o)),o&&o.classList.toggle("hidden",!i)},p=i=>n?.classList.toggle("hidden",!i),y=["images","title","url","published"],g=b("messages")?.noMorePostsFound||"n/a",S=()=>{n?.classList.add("hidden");const i=v(`<p class="text-center p-2 text-red-500">${g}</p>`);i&&r?.append(i)},u=()=>{l||!a||(d(),p(!1),l=!0,w("list",{fetchBodies:!1,fetchImages:!0,fields:y,maxResults:10,getNextPageToken:!0,nextPageToken:s||"",labels:m,onSuccess:i=>{i.nextPageToken&&i.nextPageToken!==s?(s=i.nextPageToken,p(!0)):(a=!1,p(!1),S()),i.items&&Array.isArray(i.items)&&i.items.forEach(h=>{f(h)})},onFinally:()=>{l=!1,d(!1)}}))};n?.addEventListener("click",i=>{i.preventDefault(),u()}),n&&q(n,()=>{u()},!0)}function D(t="#related-posts-template"){const e=document.querySelector(t),r=document.querySelector('[data-observe-for="related_posts"]'),o=r?.dataset.label?.replace(/\s+/g,"").split(",")||[];if(!e||!r||o.length<=0)return;const n=l=>{let c='<div class="flex gap-2 p-1">';if(l.images?.length){const f=l.images[0].url||"";f&&(c+=`<div class="min-w-20 w-20 aspect-square flex justify-center items-center overflow-hidden rounded"><a href="${l.url||"#"}" class="block w-full h-full"><img src="${f}" class="object-cover h-full min-w-full hover-scale-up"/></a></div>`)}const m=k(l.published||"");return c+=`<div class="flex-auto"><a href="${l.url||"#"}" class="block hover:text-amber-400">${l.title||"no title"}</a><div><span>${m}</span></div></div></div>`,v(c)},s=l=>{const c=v('<div class="flex flex-col divide-y divide-neutral-300"></div>');if(!c||!l.length)return;const m=e.content.firstElementChild?.cloneNode(!0);l.forEach(f=>{const d=n(f);d&&c.append(d)}),m?.appendChild(c),m&&r.insertAdjacentElement("afterend",m)};r.classList.add("flex","items-start","justify-center","min-h-[60vh]","w-full");const a=E();a&&r.append(a),q(r,()=>{w("list",{fields:["title","url","images","published"],fetchBodies:!1,fetchImages:!0,maxResults:6,labels:o,onSuccess:l=>{const c=l.items||[];c.length&&s(c)},onError:l=>{console.log(l)},onFinally:()=>r.remove()})},!0,.3)}const F=(t=".search-box")=>{const e=document.querySelector(t);if(!e)return;const r=e.querySelector("input");let o=e.dataset.visible==="true",n=null;const s=document.querySelectorAll('[data-trigger-for="search_box"]'),a=e.querySelector("[data-results]"),l=u=>{e.setAttribute("data-visible",u?"true":"false"),o=u},c=()=>{if(a?.querySelector("[data-spinner]"))return;const u=E(["data-spinner"]);u&&a?.append(u)},m=u=>{e.setAttribute("data-results-visible",u?"true":"false")},f=u=>{e.setAttribute("data-spinner-visible",u?"true":"false")},d=u=>{const i=u.match(/<img[^>]+src="([^">]+)"/);return i?i[1].replace("/s1600/","/s150/"):""},p=u=>{let i='<div class="flex gap-2 w-full py-2">';const h=d(u.content||"");return h&&(i+=`<div class="thumbnail min-w-20 w-20 aspect-square rounded overflow-hidden ms-2">
            <a href="${u.url||"#"}" class="w-full h-full"
              ><img
                src="${h}" class="object-cover min-h-full min-w-full hover-scale-up"
            /></a>
          </div>`),i+=`
        <div class="flex-auto">
            <a href="${u.url||"#"}" class="block pe-2"
      >${u.title||"No title"}</a>
          </div>
        `,i+="</div>",v(i)},y=u=>{const i=v('<div class="flex flex-col divide-y w-full divide-neutral-400 pt-2"></div>');i&&(u.forEach(h=>{const A=p(h);A&&i.append(A)}),a?.append(i))},g=b("messages")?.searchNoResults??"N/A",S=()=>{const u=v(`<p class="text-red-500 text-center w-full p-2">${g}</p>`);u&&a?.append(u)};c(),s.forEach(u=>{u.addEventListener("click",i=>{i.preventDefault();const h=i.target;l(h?.dataset.action!=="close")})}),document.addEventListener("click",u=>{const i=u.target;i&&i&&o&&!e?.contains(i)&&i.dataset.triggerFor!=="search_box"&&(m(!1),l(!1))}),r?.addEventListener("input",u=>{const i=u.target?.value||"";n&&clearTimeout(n),n=setTimeout(()=>{if(!i){m(!1);return}f(!0),m(!0),w("search",{query:i,fields:["title","url","published","content"],fetchBodies:!0,onSuccess:h=>{h&&Array.isArray(h.items)?y(h.items):S()},onFinally:()=>{f(!1)}}),a?.querySelector(":scope>:not([data-spinner])")?.remove()},1e3)})},P=document.querySelector('[data-elememt="nav_list"]');P&&N(P);const V=t=>{const e=document.querySelector(t);if(!e)return;const r=document.querySelectorAll('[data-trigger-for="sidenav"]'),o=n=>e.setAttribute("data-visible",n?"true":"false");r.forEach(n=>{n.addEventListener("click",s=>{s.preventDefault();const a=s.target?.dataset.triggerType==="close";o(!a)})})};function z(){const t=localStorage.getItem("theme")||"system",e=document.querySelectorAll('[name="theme_switcher"]'),r=o=>{document.documentElement.setAttribute("data-theme",o)};(t==="dark"||t==="light"||t==="system")&&r(t),e.forEach(o=>{t===o.value&&(o.checked=!0),o.addEventListener("change",n=>{const s=n.target;s.checked&&["system","dark","light"].includes(s.value)&&(r(s.value),localStorage.setItem("theme",s.value))})})}document.addEventListener("DOMContentLoaded",()=>{z(),F(),V('[data-element="sidenav"]'),D(),O(),B(),j(),_(),T(),L(),document.querySelectorAll('img[data-lazy="true"]').forEach(t=>{I(t)})});
