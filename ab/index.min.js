(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function o(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(t){if(t.ep)return;t.ep=!0;const s=o(t);fetch(t.href,s)}})();function v(r="list",e={maxResults:10,fetchImages:!0,getNextPageToken:!1}){const o=document.head.querySelector('meta[name="blog_id"]')?.getAttribute("content")||"",n=document.head.querySelector('meta[name="blogger_api_key"]')?.getAttribute("content")||"";if(!o||!n)return;let t=`https://www.googleapis.com/blogger/v3/blogs/${o}/posts`;r==="search"&&(t+="/search"),t+=`?key=${n}`,r==="search"?t+=`&q=${e.query||""}`:e.labels&&e.labels.length>0&&(t+=`&labels=${e.labels.join(",")}`),r!=="search"&&(t+=`&maxResults=${e.maxResults||10}`,t+=`&fetchImages=${e.fetchImages?"true":"false"}`),t+=`&fetchBodies=${e.fetchBodies?"true":"false"}`,e.nextPageToken&&r!=="search"&&(t+=`&pageToken=${e.nextPageToken}`);const s=[];e.fields&&Array.isArray(e.fields)&&e.fields.length>0&&s.push(`items(${e.fields.join(",")})`),e.getNextPageToken&&s.push("nextPageToken"),s.length&&(t+=`&fields=${s.join(",")}`),fetch(t).then(l=>l.json()).then(l=>{e.onSuccess&&e.onSuccess(l)}).catch(l=>{e.onError&&e.onError(l)}).finally(()=>{e.onFinally&&e.onFinally()})}function p(r){let e=document.createElement("template");return e.innerHTML=r,e.content.firstElementChild?.cloneNode(!0)||void 0}function T(r,e){const o=new ResizeObserver(n=>{for(let t of n){const s=t.contentRect;e(s)}});return o.observe(r),o}function S(r,e,o=!0,n=.2){new IntersectionObserver((s,l)=>{s.forEach(a=>{if(a.isIntersecting){const u=a.target;e&&typeof e=="function"&&e(u),o&&l.unobserve(u)}})},{rootMargin:"0px 0px 50px 0px",threshold:n}).observe(r)}function P(r){if(!(r instanceof HTMLElement))return;let e;const o=n=>{n.dataset.src&&(["loader","lazy"].forEach(s=>{n.classList.contains(s)&&n.classList.remove(s)}),n.setAttribute("src",n.dataset.src),n.removeAttribute("data-src"))};S(r,n=>{clearTimeout(e),e=setTimeout(()=>{o(n)},500)})}function A(r){const e=r.parentElement;if(!e)return;let o=null;const n=t=>{let s=15;t<=520?s=2:t<=640?s=3:t<=768?s=4:t<=1024?s=7:t<=1168&&(s=8),r.querySelectorAll(":scope>*").forEach((a,u)=>{u+1>s?a.style.display="none":a.style.display=""})};T(e,t=>{o&&clearTimeout(o),o=setTimeout(()=>n(t?.width||0),700)})}const q=r=>r?new Date(r).toLocaleDateString("fr"):"",C=(r=void 0)=>p(`<div ${r?r.join(" "):""} class="justify-center">
          <div class="w-5 aspect-square m-2 animate-spin rounded-full border-2 border-gray-300 border-t-zinc-600"></div>
      </div>`);function x(r,e,o=0){const n=e.content.firstElementChild?.cloneNode(!0);if(!n)return null;const t=n.querySelector('[data-container="post_thumbnail"]');let s="";return r.images.length&&(s=r.images[0].url||"",o>0&&(s=_(s,o))),s?t?.querySelector("img")?.setAttribute("src",s):t?.remove(),n.querySelectorAll('[data-container="post_url"]').forEach(a=>{a.href=r.url||"#"}),n.querySelector('[data-container="post_title"]>a').textContent=r.title||"No title",n.querySelector('[data-container="post_date"]>span').textContent=q(r.published||""),n}function _(r,e){return/\/w\d+-h\d+\//.test(r)?r.replace(/\/w\d+-h\d+\//,`/s${e}/`):r.replace(/\/s\d+\//,`/s${e}/`)}function k(){const r=document.querySelector("#category-template-type-2"),e=document.querySelector("#post-card-template"),o=document.querySelector("#index-post-row-template");if(!r)return;const n=document.querySelectorAll('[data-category-type="1"]'),t=(l,a,u,f)=>{const d=r.content.firstElementChild?.cloneNode(!0);if(!d)return;d.querySelector('[data-container="title"]').textContent=a,d.querySelector('[data-container="category_link"]').href="/search?category="+l;const g=d.querySelector("[data-type='single']"),h=d.querySelector("[data-type='multiple']");!e||!o||(u.forEach((y,b)=>{if(b===0){const c=x(y,e,550);c&&g?.append(c)}else{const c=x(y,o,300);c&&h?.append(c)}}),f.insertAdjacentElement("beforebegin",d))},s=(l,a,u,f)=>{v("list",{labels:[u],maxResults:f,fields:["images","title","url","published"],fetchImages:!0,fetchBodies:!1,onSuccess:d=>{d.items&&t(u,a,d.items,l)}})};n.forEach(l=>{S(l,a=>{const u=a.dataset.category,f=a.dataset.title,d=a.dataset.maxResults||"5";u&&s(a,f||"No title",u,Number(d))})})}function R(){const r=document.querySelector('[data-observe-for="recent_posts"]'),e=document.querySelector("#latest-posts-template"),o=document.querySelector("#index-post-row-template");if(!e||!r)return;const n=(s,l)=>{const a=e.content.firstElementChild?.cloneNode(!0);if(!a)return;a.querySelector('[data-container="title"]').textContent=s,a.querySelector('[data-container="more_posts_link"]').href="/search";const u=a.querySelector("[data-element='posts_container']");!u||!o||(l.forEach(f=>{const d=x(f,o,250);d&&u?.append(d)}),r.insertAdjacentElement("beforebegin",a))},t=(s,l)=>{v("list",{maxResults:l,fields:["images","title","url","published"],fetchImages:!0,fetchBodies:!1,onSuccess:a=>{a.items&&n(s,a.items)}})};S(r,s=>{const l=s.dataset.title,a=s.dataset.maxResults||"5";t(l||"No title",Number(a))})}function L(r,e){const o=e.content.firstElementChild?.cloneNode(!0);if(!o)return null;const n=o.querySelector('[data-container="post_thumbnail"]');let t="";return r.images.length&&(t=r.images[0].url||""),t?n?.querySelector("img")?.setAttribute("src",t):n?.remove(),o.querySelectorAll('[data-container="post_url"]').forEach(l=>{l.href=r.url||"#"}),o.querySelector('[data-container="post_title"]>a').textContent=r.title||"No title",o.querySelector('[data-container="post_date"]>span').textContent=q(r.published||""),o}function I(){const r=document.querySelector("#index-post-row-template"),e=document.querySelector("[data-element='recent_posts_container']");if(!r||!e)return;const o=document.querySelector('[data-element="recent_posts_controller"]');let n=o?.querySelector('[data-spinner="recent_posts"]')||null;const t=o?.querySelector("button")||null;let s="",l=!0,a=!1;const f=new URLSearchParams(window.location.search||"").get("category")?.split(",")||[],d=i=>{const m=L(i,r);m&&e.append(m)},g=(i=!0)=>{n||(n=C(['data-spinner="recent_posts"']),n&&o&&o.prepend(n)),n&&n.classList.toggle("hidden",!i)},h=i=>t?.classList.toggle("hidden",!i),y=["images","title","url","published"],b=()=>{t?.classList.add("hidden");const i=p('<p class="text-center p-2 text-red-500">لم يتم العثور على مزيد من المواضيع</p>');i&&o?.append(i)},c=()=>{a||!l||(g(),h(!1),a=!0,v("list",{fetchBodies:!1,fetchImages:!0,fields:y,maxResults:10,getNextPageToken:!0,nextPageToken:s||"",labels:f,onSuccess:i=>{i.nextPageToken&&i.nextPageToken!==s?(s=i.nextPageToken,h(!0)):(l=!1,h(!1),b()),i.items&&Array.isArray(i.items)&&i.items.forEach(m=>{d(m)})},onFinally:()=>{a=!1,g(!1)}}))};t?.addEventListener("click",i=>{i.preventDefault(),c()}),t&&S(t,()=>{c()},!0)}const w=document.querySelector('[data-elememt="nav_list"]');w&&A(w);const N=(r=".search-box")=>{const e=document.querySelector(r);if(!e)return;const o=e.querySelector("input");let n=e.dataset.visible==="true",t=null;const s=document.querySelectorAll('[data-trigger-for="search_box"]'),l=e.querySelector("[data-results]"),a=c=>{e.setAttribute("data-visible",c?"true":"false"),n=c},u=()=>{if(l?.querySelector("[data-spinner]"))return;const c=C(["data-spinner"]);c&&l?.append(c)},f=c=>{e.setAttribute("data-results-visible",c?"true":"false")},d=c=>{e.setAttribute("data-spinner-visible",c?"true":"false")},g=c=>{const i=c.match(/<img[^>]+src="([^">]+)"/);return i?i[1].replace("/s1600/","/s150/"):""},h=c=>{let i='<div class="flex gap-2 w-full py-2">';const m=g(c.content||"");return m&&(i+=`<div class="thumbnail min-w-20 w-20 aspect-square rounded overflow-hidden ms-2">
            <a href="${c.url||"#"}" class="w-full h-full"
              ><img
                src="${m}" class="object-cover min-h-full min-w-full hover-scale-up"
            /></a>
          </div>`),i+=`
        <div class="flex-auto">
            <a href="${c.url||"#"}" class="block pe-2"
      >${c.title||"No title"}</a>
          </div>
        `,i+="</div>",p(i)},y=c=>{const i=p('<div class="flex flex-col divide-y w-full divide-neutral-400 pt-2"></div>');i&&(c.forEach(m=>{const E=h(m);E&&i.append(E)}),l?.append(i))},b=()=>{const c=p('<p class="text-red-500 text-center w-full p-2">لم يتم العثور على أية نتائج</p>');c&&l?.append(c)};u(),s.forEach(c=>{c.addEventListener("click",i=>{i.preventDefault(),a(!0)})}),document.addEventListener("click",c=>{const i=c.target;i&&i&&n&&!e?.contains(i)&&i.dataset.triggerFor!=="search_box"&&(f(!1),a(!1))}),o?.addEventListener("input",c=>{const i=c.target?.value||"";t&&clearTimeout(t),t=setTimeout(()=>{if(!i){f(!1);return}d(!0),f(!0),v("search",{query:i,fields:["title","url","published","content"],fetchBodies:!0,onSuccess:m=>{m&&Array.isArray(m.items)?y(m.items):b()},onFinally:()=>{d(!1)}}),l?.querySelector(":scope>:not([data-spinner])")?.remove()},1e3)})},$=r=>{const e=document.querySelector(r);if(!e)return;const o=document.querySelectorAll('[data-trigger-for="sidenav"]'),n=t=>e.setAttribute("data-visible",t?"true":"false");o.forEach(t=>{t.addEventListener("click",s=>{s.preventDefault();const l=s.target?.dataset.triggerType==="close";n(!l)})})};function B(){const r=localStorage.getItem("theme")||"system",e=document.querySelectorAll('[name="theme_switcher"]'),o=n=>{document.documentElement.setAttribute("data-theme",n)};(r==="dark"||r==="light"||r==="system")&&o(r),e.forEach(n=>{r===n.value&&(n.checked=!0),n.addEventListener("change",t=>{const s=t.target;s.checked&&["system","dark","light"].includes(s.value)&&(o(s.value),localStorage.setItem("theme",s.value))})})}function O(r="#related-posts-template"){const e=document.querySelector(r),o=document.querySelector('[data-observe-for="related_posts"]'),n=e?.dataset.labels?.split(",")||[];if(console.log(n),!e||!o||n.length<=0)return;const t=l=>{let a='<div class="flex gap-2 p-1">';if(l.images?.length){const f=l.images[0].url||"";f&&(a+=`<div class="min-w-20 w-20 aspect-square flex justify-center items-center overflow-hidden rounded"><a href="${l.url||"#"}" class="block w-full h-full"><img src="${f}" class="object-cover h-full min-w-full hover-scale-up"/></a></div>`)}const u=q(l.published||"");return a+=`<div class="flex-auto"><a href="${l.url||"#"}" class="block hover:text-amber-400">${l.title||"no title"}</a><div><span>${u}</span></div></div></div>`,p(a)},s=l=>{const a=p('<div class="flex flex-col divide-y divide-neutral-300"></div>');if(!a||!l.length)return;const u=e.content.firstElementChild?.cloneNode(!0);l.forEach(f=>{const d=t(f);d&&a.append(d)}),u?.appendChild(a),u&&e.after(u)};S(o,()=>{v("list",{fields:["title","url","images","published"],fetchBodies:!1,fetchImages:!0,maxResults:6,onSuccess:l=>{const a=l.items||[];a.length&&s(a)},onError:l=>{console.log(l)}})})}document.addEventListener("DOMContentLoaded",()=>{B(),N(),$('[data-element="sidenav"]'),O(),I(),k(),R(),document.querySelectorAll('img[data-lazy="true"]').forEach(r=>{P(r)})});
