(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}})();let S=null;function E(s=void 0){if(!S){const e=document.querySelector("#blog-json-data");if(e){const n=JSON.parse(e.textContent);n&&(S=n)}}return S?s?S[s]:S:null}function x(s="list",e={maxResults:10,fetchImages:!0,getNextPageToken:!1}){const n=E("blogId")||"",l=E("bloggerApiKey")||"";(!n||!l)&&console.error("Blogger api key and/or blog ID is missing");let t=`https://www.googleapis.com/blogger/v3/blogs/${n}/posts`;s==="search"&&(t+="/search"),t+=`?key=${l}`,s==="search"?t+=`&q=${e.query||""}`:e.labels&&e.labels.length>0&&(t+=`&labels=${e.labels.join(",")}`),s!=="search"&&(t+=`&maxResults=${e.maxResults||10}`,t+=`&fetchImages=${e.fetchImages?"true":"false"}`),t+=`&fetchBodies=${e.fetchBodies?"true":"false"}`,e.nextPageToken&&s!=="search"&&(t+=`&pageToken=${e.nextPageToken}`);const r=[];e.fields&&Array.isArray(e.fields)&&e.fields.length>0&&r.push(`items(${e.fields.join(",")})`),e.getNextPageToken&&r.push("nextPageToken"),r.length&&(t+=`&fields=${r.join(",")}`),fetch(t).then(i=>i.json()).then(i=>{e.onSuccess&&e.onSuccess(i)}).catch(i=>{e.onError&&e.onError(i)}).finally(()=>{e.onFinally&&e.onFinally()})}function g(s){let e=document.createElement("template");return e.innerHTML=s,e.content.firstElementChild?.cloneNode(!0)||void 0}function R(s,e){const n=new ResizeObserver(l=>{for(let t of l){const r=t.contentRect;e(r)}});return n.observe(s),n}function q(s,e,n=!0,l=.2){new IntersectionObserver((r,i)=>{r.forEach(o=>{if(o.isIntersecting){const u=o.target;e&&typeof e=="function"&&e(u),n&&i.unobserve(u)}})},{rootMargin:"0px 0px 50px 0px",threshold:l}).observe(s)}function L(s){if(!(s instanceof HTMLElement))return;let e;const n=l=>{l.dataset.src&&(["loader","lazy"].forEach(r=>{l.classList.contains(r)&&l.classList.remove(r)}),l.setAttribute("src",l.dataset.src),l.removeAttribute("data-src"))};q(s,l=>{clearTimeout(e),e=setTimeout(()=>{n(l)},500)})}function N(s){const e=s.parentElement;if(!e)return;let n=null;const l=t=>{let r=15;t<=520?r=2:t<=640?r=3:t<=768?r=4:t<=1024?r=7:t<=1168&&(r=8),s.querySelectorAll(":scope>*").forEach((o,u)=>{u+1>r?o.style.display="none":o.style.display=""})};R(e,t=>{n&&clearTimeout(n),n=setTimeout(()=>l(t?.width||0),700)})}const P=s=>s?new Date(s).toLocaleDateString("fr"):"",w=(s=void 0)=>g(`<div ${s?s.join(" "):""} class="justify-center">
          <div class="w-5 aspect-square m-2 animate-spin rounded-full border-2 border-gray-300 border-t-zinc-600"></div>
      </div>`);function C(s,e,n=0){const l=e.content.firstElementChild?.cloneNode(!0);if(!l)return null;const t=l.querySelector('[data-container="post_thumbnail"]');let r="";return s.images.length&&(r=s.images[0].url||"",n>0&&(r=k(r,n))),r?t?.querySelector("img")?.setAttribute("src",r):t?.remove(),l.querySelectorAll('[data-container="post_url"]').forEach(o=>{o.href=s.url||"#"}),l.querySelector('[data-container="post_title"]>a').textContent=s.title||"No title",l.querySelector('[data-container="post_date"]>span').textContent=P(s.published||""),l}function k(s,e){return/\/w\d+-h\d+\//.test(s)?s.replace(/\/w\d+-h\d+\//,`/s${e}/`):s.replace(/\/s\d+\//,`/s${e}/`)}function I(){const s=document.querySelector("#category-template-type-2"),e=document.querySelector("#post-card-template"),n=document.querySelector("#index-post-row-template");if(!s)return;const l=document.querySelectorAll('[data-category-type="1"]'),t=(o,u,d,m)=>{const f=s.content.firstElementChild?.cloneNode(!0);if(!f)return;f.querySelector('[data-container="title"]').textContent=u,f.querySelector('[data-container="category_link"]').href="/search?category="+o;const p=f.querySelector("[data-type='single']"),v=f.querySelector("[data-type='multiple']");!e||!n||(d.forEach((y,b)=>{if(b===0){const c=C(y,e,550);c&&p?.append(c)}else{const c=C(y,n,300);c&&v?.append(c)}}),m.insertAdjacentElement("beforebegin",f))},r=(o,u,d,m)=>{x("list",{labels:[d],maxResults:m,fields:["images","title","url","published"],fetchImages:!0,fetchBodies:!1,onSuccess:f=>{f.items&&t(d,u,f.items,o)},onFinally:()=>o.remove()})},i=w();l.forEach(o=>{o.classList.add("flex","items-start","justify-center","min-h-[70vh]","w-full"),i&&o.append(i.cloneNode(!0)),q(o,u=>{const d=u.dataset.category,m=u.dataset.title,f=u.dataset.maxResults||"5";d?r(u,m||"No title",d,Number(f)):u.remove()},!0,.3)})}function _(){const s=document.querySelector('[data-observe-for="recent_posts"]'),e=document.querySelector("#latest-posts-template"),n=document.querySelector("#index-post-row-template");if(!e||!s)return;const l=(r,i)=>{const o=e.content.firstElementChild?.cloneNode(!0);if(!o)return;o.querySelector('[data-container="title"]').textContent=r,o.querySelector('[data-container="more_posts_link"]').href="/search";const u=o.querySelector("[data-element='posts_container']");!u||!n||(i.forEach(d=>{const m=C(d,n,250);m&&u?.append(m)}),s.insertAdjacentElement("beforebegin",o))},t=(r,i)=>{x("list",{maxResults:i,fields:["images","title","url","published"],fetchImages:!0,fetchBodies:!1,onSuccess:o=>{o.items&&l(r,o.items)}})};q(s,r=>{const i=r.dataset.title,o=r.dataset.maxResults||"5";t(i||"No title",Number(o))})}function $(s,e){const n=e.content.firstElementChild?.cloneNode(!0);if(!n)return null;const l=n.querySelector('[data-container="post_thumbnail"]');let t="";return s.images.length&&(t=s.images[0].url||""),t?l?.querySelector("img")?.setAttribute("src",t):l?.remove(),n.querySelectorAll('[data-container="post_url"]').forEach(i=>{i.href=s.url||"#"}),n.querySelector('[data-container="post_title"]>a').textContent=s.title||"No title",n.querySelector('[data-container="post_date"]>span').textContent=P(s.published||""),n}function B(){const s=document.querySelector("#index-post-row-template"),e=document.querySelector("[data-element='recent_posts_container']");if(!s||!e)return;const n=document.querySelector('[data-element="recent_posts_controller"]');let l=n?.querySelector('[data-spinner="recent_posts"]')||null;const t=n?.querySelector("button")||null;let r="",i=!0,o=!1;const d=new URLSearchParams(window.location.search||"").get("category")?.split(",")||[],m=a=>{const h=$(a,s);h&&e.append(h)},f=(a=!0)=>{l||(l=w(['data-spinner="recent_posts"']),l&&n&&n.prepend(l)),l&&l.classList.toggle("hidden",!a)},p=a=>t?.classList.toggle("hidden",!a),v=["images","title","url","published"],y=E("messages")?.noMorePostsFound||"n/a",b=()=>{t?.classList.add("hidden");const a=g(`<p class="text-center p-2 text-red-500">${y}</p>`);a&&n?.append(a)},c=()=>{o||!i||(f(),p(!1),o=!0,x("list",{fetchBodies:!1,fetchImages:!0,fields:v,maxResults:10,getNextPageToken:!0,nextPageToken:r||"",labels:d,onSuccess:a=>{a.nextPageToken&&a.nextPageToken!==r?(r=a.nextPageToken,p(!0)):(i=!1,p(!1),b()),a.items&&Array.isArray(a.items)&&a.items.forEach(h=>{m(h)})},onFinally:()=>{o=!1,f(!1)}}))};t?.addEventListener("click",a=>{a.preventDefault(),c()}),t&&q(t,()=>{c()},!0)}function j(s="#related-posts-template"){const e=document.querySelector(s),n=document.querySelector('[data-observe-for="related_posts"]'),l=n?.dataset.label?.replace(/\s+/g,"").split(",")||[];if(!e||!n||l.length<=0)return;const t=o=>{let u='<div class="flex gap-2 p-1">';if(o.images?.length){const m=o.images[0].url||"";m&&(u+=`<div class="min-w-20 w-20 aspect-square flex justify-center items-center overflow-hidden rounded"><a href="${o.url||"#"}" class="block w-full h-full"><img src="${m}" class="object-cover h-full min-w-full hover-scale-up"/></a></div>`)}const d=P(o.published||"");return u+=`<div class="flex-auto"><a href="${o.url||"#"}" class="block hover:text-amber-400">${o.title||"no title"}</a><div><span>${d}</span></div></div></div>`,g(u)},r=o=>{const u=g('<div class="flex flex-col divide-y divide-neutral-300"></div>');if(!u||!o.length)return;const d=e.content.firstElementChild?.cloneNode(!0);o.forEach(m=>{const f=t(m);f&&u.append(f)}),d?.appendChild(u),d&&n.insertAdjacentElement("afterend",d)};n.classList.add("flex","items-start","justify-center","min-h-[60vh]","w-full");const i=w();i&&n.append(i),q(n,()=>{x("list",{fields:["title","url","images","published"],fetchBodies:!1,fetchImages:!0,maxResults:6,labels:l,onSuccess:o=>{const u=o.items||[];u.length&&r(u)},onError:o=>{console.log(o)},onFinally:()=>n.remove()})},!0,.3)}const M=(s=".search-box")=>{const e=document.querySelector(s);if(!e)return;const n=e.querySelector("input");let l=e.dataset.visible==="true",t=null;const r=document.querySelectorAll('[data-trigger-for="search_box"]'),i=e.querySelector("[data-results]"),o=c=>{e.setAttribute("data-visible",c?"true":"false"),l=c},u=()=>{if(i?.querySelector("[data-spinner]"))return;const c=w(["data-spinner"]);c&&i?.append(c)},d=c=>{e.setAttribute("data-results-visible",c?"true":"false")},m=c=>{e.setAttribute("data-spinner-visible",c?"true":"false")},f=c=>{const a=c.match(/<img[^>]+src="([^">]+)"/);return a?a[1].replace("/s1600/","/s150/"):""},p=c=>{let a='<div class="flex gap-2 w-full py-2">';const h=f(c.content||"");return h&&(a+=`<div class="thumbnail min-w-20 w-20 aspect-square rounded overflow-hidden ms-2">
            <a href="${c.url||"#"}" class="w-full h-full"
              ><img
                src="${h}" class="object-cover min-h-full min-w-full hover-scale-up"
            /></a>
          </div>`),a+=`
        <div class="flex-auto">
            <a href="${c.url||"#"}" class="block pe-2"
      >${c.title||"No title"}</a>
          </div>
        `,a+="</div>",g(a)},v=c=>{const a=g('<div class="flex flex-col divide-y w-full divide-neutral-400 pt-2"></div>');a&&(c.forEach(h=>{const T=p(h);T&&a.append(T)}),i?.append(a))},y=E("messages")?.searchNoResults??"N/A",b=()=>{const c=g(`<p class="text-red-500 text-center w-full p-2">${y}</p>`);c&&i?.append(c)};u(),r.forEach(c=>{c.addEventListener("click",a=>{a.preventDefault();const h=a.target;o(h?.dataset.action!=="close")})}),document.addEventListener("click",c=>{const a=c.target;a&&a&&l&&!e?.contains(a)&&a.dataset.triggerFor!=="search_box"&&(d(!1),o(!1))}),n?.addEventListener("input",c=>{const a=c.target?.value||"";t&&clearTimeout(t),t=setTimeout(()=>{if(!a){d(!1);return}m(!0),d(!0),x("search",{query:a,fields:["title","url","published","content"],fetchBodies:!0,onSuccess:h=>{h&&Array.isArray(h.items)?v(h.items):b()},onFinally:()=>{m(!1)}}),i?.querySelector(":scope>:not([data-spinner])")?.remove()},1e3)})},A=document.querySelector('[data-elememt="nav_list"]');A&&N(A);const O=s=>{const e=document.querySelector(s);if(!e)return;const n=document.querySelectorAll('[data-trigger-for="sidenav"]'),l=t=>e.setAttribute("data-visible",t?"true":"false");n.forEach(t=>{t.addEventListener("click",r=>{r.preventDefault();const i=r.target?.dataset.triggerType==="close";l(!i)})})};function D(){const s=localStorage.getItem("theme")||"system",e=document.querySelectorAll('[name="theme_switcher"]'),n=l=>{document.documentElement.setAttribute("data-theme",l)};(s==="dark"||s==="light"||s==="system")&&n(s),e.forEach(l=>{s===l.value&&(l.checked=!0),l.addEventListener("change",t=>{const r=t.target;r.checked&&["system","dark","light"].includes(r.value)&&(n(r.value),localStorage.setItem("theme",r.value))})})}document.addEventListener("DOMContentLoaded",()=>{D(),M(),O('[data-element="sidenav"]'),j(),B(),I(),_(),document.querySelectorAll('img[data-lazy="true"]').forEach(s=>{L(s)})});
