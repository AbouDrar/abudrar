(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}})();let x=null;function b(t=void 0){if(!x){const e=document.querySelector("#blog-json-data");if(e){const s=JSON.parse(e.textContent);s&&(x=s)}}return x?t?x[t]:x:null}function L(){const t=b("downloadButtonsSelector"),e=b("messages")?.unknownWebsite||"unknown website";if(!t)return;document.querySelectorAll(t).forEach(o=>{o.addEventListener("click",n=>{n.preventDefault();const r=n.target,i=r.dataset.site||"",l=r.dataset.url||"";if(!i){alert(e);return}let c="/p/download.html?website="+i;l&&(c+="&slug="+l),window.location.href=c})})}function P(){const t=b("countdownContainerSelector");if(!t)return;const e=document.querySelector(t);if(!e)return;const s=e.querySelector(":scope>button"),o=e.querySelector('[data-element="text_container"]'),n=e.querySelector('[data-element="placeholder"]'),r=Number(e.dataset.initvalue||10);let i=r,l=!1;const c=f=>{n&&(n.innerText=f.toString())},m=()=>{if(l)return;l=!0;const f=new URLSearchParams(window.location.search);let d="";if(f.forEach((y,g)=>{g==="website"?d+=y:g==="slug"?d+=y.substring(12):d+=`&${g}=${y}`}),!d){alert("The link is broken");return}c(r),o.style.display="block";const p=setInterval(()=>{i--,c(i),i<=0&&(clearInterval(p),l=!1,i=r,o.style.display="none",window.location.href=d)},1e3)};s?.addEventListener("click",f=>{f.preventDefault(),m()})}function w(t="list",e={maxResults:10,fetchImages:!0,getNextPageToken:!1}){const s=b("blogId")||"",o=b("bloggerApiKey")||"";(!s||!o)&&console.error("Blogger api key and/or blog ID is missing");let n=`https://www.googleapis.com/blogger/v3/blogs/${s}/posts`;t==="search"&&(n+="/search"),n+=`?key=${o}`,t==="search"?n+=`&q=${e.query||""}`:e.labels&&e.labels.length>0&&(n+=`&labels=${e.labels.join(",")}`),t!=="search"&&(n+=`&maxResults=${e.maxResults||10}`,n+=`&fetchImages=${e.fetchImages?"true":"false"}`),n+=`&fetchBodies=${e.fetchBodies?"true":"false"}`,e.nextPageToken&&t!=="search"&&(n+=`&pageToken=${e.nextPageToken}`);const r=[];e.fields&&Array.isArray(e.fields)&&e.fields.length>0&&r.push(`items(${e.fields.join(",")})`),e.getNextPageToken&&r.push("nextPageToken"),r.length&&(n+=`&fields=${r.join(",")}`),fetch(n).then(i=>i.json()).then(i=>{e.onSuccess&&e.onSuccess(i)}).catch(i=>{e.onError&&e.onError(i)}).finally(()=>{e.onFinally&&e.onFinally()})}function v(t){let e=document.createElement("template");return e.innerHTML=t,e.content.firstElementChild?.cloneNode(!0)||void 0}function I(t,e){const s=new ResizeObserver(o=>{for(let n of o){const r=n.contentRect;e(r)}});return s.observe(t),s}function q(t,e,s=!0,o=.2){new IntersectionObserver((r,i)=>{r.forEach(l=>{if(l.isIntersecting){const c=l.target;e&&typeof e=="function"&&e(c),s&&i.unobserve(c)}})},{rootMargin:"0px 0px 50px 0px",threshold:o}).observe(t)}function R(t){if(!(t instanceof HTMLElement))return;let e;const s=o=>{o.dataset.src&&(["loader","lazy"].forEach(r=>{o.classList.contains(r)&&o.classList.remove(r)}),o.setAttribute("src",o.dataset.src),o.removeAttribute("data-src"))};q(t,o=>{clearTimeout(e),e=setTimeout(()=>{s(o)},500)})}function N(t){const e=t.parentElement;if(!e)return;let s=null;const o=n=>{let r=15;n<=520?r=2:n<=640?r=3:n<=768?r=4:n<=1024?r=7:n<=1168&&(r=8),t.querySelectorAll(":scope>*").forEach((l,c)=>{c+1>r?l.style.display="none":l.style.display=""})};I(e,n=>{s&&clearTimeout(s),s=setTimeout(()=>o(n?.width||0),700)})}const C=t=>t?new Date(t).toLocaleDateString("fr"):"",E=(t=void 0)=>v(`<div ${t?t.join(" "):""} class="justify-center">
          <div class="w-5 aspect-square m-2 animate-spin rounded-full border-2 border-gray-300 border-t-zinc-600"></div>
      </div>`);function A(t,e,s=0){const o=e.content.firstElementChild?.cloneNode(!0);if(!o)return null;const n=o.querySelector('[data-container="post_thumbnail"]');let r="";return t.images.length&&(r=t.images[0].url||"",s>0&&(r=$(r,s))),r?n?.querySelector("img")?.setAttribute("src",r):n?.remove(),o.querySelectorAll('[data-container="post_url"]').forEach(l=>{l.href=t.url||"#"}),o.querySelector('[data-container="post_title"]>a').textContent=t.title||"No title",o.querySelector('[data-container="post_date"]>span').textContent=C(t.published||""),o}function $(t,e){return/\/w\d+-h\d+\//.test(t)?t.replace(/\/w\d+-h\d+\//,`/s${e}/`):t.replace(/\/s\d+\//,`/s${e}/`)}function _(){const t=b("removeFirstImageIn");if(!t||!Array.isArray(t)||t.length===0)return;document.querySelectorAll(t.join(",")).forEach(s=>{s.querySelector("img")?.remove()})}function B(){const t=document.querySelector("#category-template-type-2"),e=document.querySelector("#post-card-template"),s=document.querySelector("#index-post-row-template");if(!t)return;const o=document.querySelectorAll('[data-category-type="1"]'),n=(l,c,m,f)=>{const d=t.content.firstElementChild?.cloneNode(!0);if(!d)return;d.querySelector('[data-container="title"]').textContent=c,d.querySelector('[data-container="category_link"]').href="/search?category="+l;const p=d.querySelector("[data-type='single']"),y=d.querySelector("[data-type='multiple']");!e||!s||(m.forEach((g,S)=>{if(S===0){const u=A(g,e,550);u&&p?.append(u)}else{const u=A(g,s,300);u&&y?.append(u)}}),f.insertAdjacentElement("beforebegin",d))},r=(l,c,m,f)=>{w("list",{labels:[m],maxResults:f,fields:["images","title","url","published"],fetchImages:!0,fetchBodies:!1,onSuccess:d=>{d.items&&n(m,c,d.items,l)},onFinally:()=>l.remove()})},i=E();o.forEach(l=>{l.classList.add("flex","items-start","justify-center","min-h-[70vh]","w-full"),i&&l.append(i.cloneNode(!0)),q(l,c=>{const m=c.dataset.category,f=c.dataset.title,d=c.dataset.maxResults||"5";m?r(c,f||"No title",m,Number(d)):c.remove()},!0,.3)})}function j(){const t=document.querySelector('[data-observe-for="recent_posts"]'),e=document.querySelector("#latest-posts-template"),s=document.querySelector("#index-post-row-template");if(!e||!t)return;const o=(r,i)=>{const l=e.content.firstElementChild?.cloneNode(!0);if(!l)return;l.querySelector('[data-container="title"]').textContent=r,l.querySelector('[data-container="more_posts_link"]').href="/search";const c=l.querySelector("[data-element='posts_container']");!c||!s||(i.forEach(m=>{const f=A(m,s,250);f&&c?.append(f)}),t.insertAdjacentElement("beforebegin",l))},n=(r,i)=>{w("list",{maxResults:i,fields:["images","title","url","published"],fetchImages:!0,fetchBodies:!1,onSuccess:l=>{l.items&&o(r,l.items)}})};q(t,r=>{const i=r.dataset.title,l=r.dataset.maxResults||"5";n(i||"No title",Number(l))})}function M(t,e){const s=e.content.firstElementChild?.cloneNode(!0);if(!s)return null;const o=s.querySelector('[data-container="post_thumbnail"]');let n="";return t.images.length&&(n=t.images[0].url||""),n?o?.querySelector("img")?.setAttribute("src",n):o?.remove(),s.querySelectorAll('[data-container="post_url"]').forEach(i=>{i.href=t.url||"#"}),s.querySelector('[data-container="post_title"]>a').textContent=t.title||"No title",s.querySelector('[data-container="post_date"]>span').textContent=C(t.published||""),s}function O(){const t=document.querySelector("#index-post-row-template"),e=document.querySelector("[data-element='recent_posts_container']");if(!t||!e)return;const s=document.querySelector('[data-element="recent_posts_controller"]');let o=s?.querySelector('[data-spinner="recent_posts"]')||null;const n=s?.querySelector("button")||null;let r="",i=!0,l=!1;const m=new URLSearchParams(window.location.search||"").get("category")?.split(",")||[],f=a=>{const h=M(a,t);h&&e.append(h)},d=(a=!0)=>{o||(o=E(['data-spinner="recent_posts"']),o&&s&&s.prepend(o)),o&&o.classList.toggle("hidden",!a)},p=a=>n?.classList.toggle("hidden",!a),y=["images","title","url","published"],g=b("messages")?.noMorePostsFound||"n/a",S=()=>{n?.classList.add("hidden");const a=v(`<p class="text-center p-2 text-red-500">${g}</p>`);a&&s?.append(a)},u=()=>{l||!i||(d(),p(!1),l=!0,w("list",{fetchBodies:!1,fetchImages:!0,fields:y,maxResults:10,getNextPageToken:!0,nextPageToken:r||"",labels:m,onSuccess:a=>{a.nextPageToken&&a.nextPageToken!==r?(r=a.nextPageToken,p(!0)):(i=!1,p(!1),S()),a.items&&Array.isArray(a.items)&&a.items.forEach(h=>{f(h)})},onFinally:()=>{l=!1,d(!1)}}))};n?.addEventListener("click",a=>{a.preventDefault(),u()}),n&&q(n,()=>{u()},!0)}function D(t=".html-injection-template"){document.querySelectorAll(t).forEach(s=>{const o=s.innerHTML,n=s.dataset.position||"afterbegin";let r=s.dataset.container?document.querySelector(s.dataset.container):null;!r&&s.dataset.containerAlt&&(r=document.querySelector(s.dataset.containerAlt)),!(!r||!o||!["beforebegin","afterbegin","beforeend","afterend"].includes(n))&&r.insertAdjacentHTML(n,o)})}function F(t="#related-posts-template"){const e=document.querySelector(t),s=document.querySelector('[data-observe-for="related_posts"]'),o=s?.dataset.label?.replace(/\s+/g,"").split(",")||[];if(!e||!s||o.length<=0)return;const n=l=>{let c='<div class="flex gap-2 p-1">';if(l.images?.length){const f=l.images[0].url||"";f&&(c+=`<div class="min-w-20 w-20 aspect-square flex justify-center items-center overflow-hidden rounded"><a href="${l.url||"#"}" class="block w-full h-full"><img src="${f}" class="object-cover h-full min-w-full hover-scale-up"/></a></div>`)}const m=C(l.published||"");return c+=`<div class="flex-auto"><a href="${l.url||"#"}" class="block hover:text-amber-400">${l.title||"no title"}</a><div><span>${m}</span></div></div></div>`,v(c)},r=l=>{const c=v('<div class="flex flex-col divide-y divide-neutral-300"></div>');if(!c||!l.length)return;const m=e.content.firstElementChild?.cloneNode(!0);l.forEach(f=>{const d=n(f);d&&c.append(d)}),m?.appendChild(c),m&&s.insertAdjacentElement("afterend",m)};s.classList.add("flex","items-start","justify-center","min-h-[60vh]","w-full");const i=E();i&&s.append(i),q(s,()=>{w("list",{fields:["title","url","images","published"],fetchBodies:!1,fetchImages:!0,maxResults:6,labels:o,onSuccess:l=>{const c=l.items||[];c.length&&r(c)},onError:l=>{console.log(l)},onFinally:()=>s.remove()})},!0,.3)}const V=(t=".search-box")=>{const e=document.querySelector(t);if(!e)return;const s=e.querySelector("input");let o=e.dataset.visible==="true",n=null;const r=document.querySelectorAll('[data-trigger-for="search_box"]'),i=e.querySelector("[data-results]"),l=u=>{e.setAttribute("data-visible",u?"true":"false"),o=u},c=()=>{if(i?.querySelector("[data-spinner]"))return;const u=E(["data-spinner"]);u&&i?.append(u)},m=u=>{e.setAttribute("data-results-visible",u?"true":"false")},f=u=>{e.setAttribute("data-spinner-visible",u?"true":"false")},d=u=>{const a=u.match(/<img[^>]+src="([^">]+)"/);return a?a[1].replace("/s1600/","/s150/"):""},p=u=>{let a='<div class="flex gap-2 w-full py-2">';const h=d(u.content||"");return h&&(a+=`<div class="thumbnail min-w-20 w-20 aspect-square rounded overflow-hidden ms-2">
            <a href="${u.url||'#'}" class="w-full h-full"
              ><img
                src="${h}" class="object-cover min-h-full min-w-full hover-scale-up"
            /></a>
          </div>`),a+=`
        <div class="flex-auto">
            <a href="${u.url||'#'}" class="block pe-2"
      >${u.title||"No title"}</a>
          </div>
        `,a+="</div>",v(a)},y=u=>{const a=v('<div class="flex flex-col divide-y w-full divide-neutral-400 pt-2"></div>');a&&(u.forEach(h=>{const k=p(h);k&&a.append(k)}),i?.append(a))},g=b("messages")?.searchNoResults??"N/A",S=()=>{const u=v(`<p class="text-red-500 text-center w-full p-2">${g}</p>`);u&&i?.append(u)};c(),r.forEach(u=>{u.addEventListener("click",a=>{a.preventDefault();const h=a.target;l(h?.dataset.action!=="close")})}),document.addEventListener("click",u=>{const a=u.target;a&&a&&o&&!e?.contains(a)&&a.dataset.triggerFor!=="search_box"&&(m(!1),l(!1))}),s?.addEventListener("input",u=>{const a=u.target?.value||"";n&&clearTimeout(n),n=setTimeout(()=>{if(!a){m(!1);return}f(!0),m(!0),w("search",{query:a,fields:["title","url","published","content"],fetchBodies:!0,onSuccess:h=>{h&&Array.isArray(h.items)?y(h.items):S()},onFinally:()=>{f(!1)}}),i?.querySelector(":scope>:not([data-spinner])")?.remove()},1e3)})},T=document.querySelector('[data-elememt="nav_list"]');T&&N(T);const H=t=>{const e=document.querySelector(t);if(!e)return;const s=document.querySelectorAll('[data-trigger-for="sidenav"]'),o=n=>e.setAttribute("data-visible",n?"true":"false");s.forEach(n=>{n.addEventListener("click",r=>{r.preventDefault();const i=r.target?.dataset.triggerType==="close";o(!i)})})};function z(){const t=localStorage.getItem("theme")||"system",e=document.querySelectorAll('[name="theme_switcher"]'),s=o=>{document.documentElement.setAttribute("data-theme",o)};(t==="dark"||t==="light"||t==="system")&&s(t),e.forEach(o=>{t===o.value&&(o.checked=!0),o.addEventListener("change",n=>{const r=n.target;r.checked&&["system","dark","light"].includes(r.value)&&(s(r.value),localStorage.setItem("theme",r.value))})})}document.addEventListener("DOMContentLoaded",()=>{z(),V(),H('[data-element="sidenav"]'),F(),O(),B(),j(),_(),L(),D(),P(),document.querySelectorAll('img[data-lazy="true"]').forEach(t=>{R(t)})});
